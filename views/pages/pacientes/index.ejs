<div class="space-y-8">
  <!-- Encabezado -->
  <header class="flex items-center justify-between">
    <div>
      <h1 class="text-3xl font-bold text-[#3F4A4C]">Pacientes üßë‚Äç‚öïÔ∏è</h1>
      <p class="text-sm text-[#3F4A4C]/70">Gesti√≥n y control de pacientes registrados</p>
    </div>

    <button
      id="btnAddPaciente"
      class="bg-[#A7D9B8] hover:bg-[#3F4A4C] hover:text-white text-[#3F4A4C] font-semibold px-5 py-2 rounded-xl shadow transition"
    >
      + Nuevo paciente
    </button>
  </header>

  <!-- Filtros -->
  <form method="GET" action="/pacientes" class="flex flex-wrap gap-4 items-center">
    <input
      type="text"
      name="q"
      value="<%= typeof busqueda !== 'undefined' ? busqueda : '' %>"
      placeholder="Buscar paciente por nombre o DNI..."
      class="flex-1 min-w-[240px] px-4 py-2 rounded-xl border border-[#E0E6E6] bg-white/60 backdrop-blur-md outline-none focus:ring-2 focus:ring-[#A7D9B8]"
    />
    <button
      type="submit"
      class="px-5 py-2 rounded-xl bg-[#A7D9B8] hover:bg-[#3F4A4C] text-white font-semibold shadow transition"
    >
      Buscar
    </button>
  </form>

  <% if (busqueda) { %>
    <p class="text-sm text-[#3F4A4C]/70">
      Resultados de b√∫squeda para: <strong><%= busqueda %></strong>
    </p>
  <% } %>


  <!-- Tabla de pacientes -->
  <div class="overflow-x-auto rounded-2xl bg-white/60 backdrop-blur-md shadow-lg border border-[#E0E6E6]">
    <table class="w-full text-sm text-[#3F4A4C]">
      <thead class="bg-[#A7D9B8]/70 text-[#3F4A4C] font-semibold uppercase tracking-wide">
        <tr>
          <th class="px-6 py-3 text-left">#</th>
          <th class="px-6 py-3 text-left">DNI</th>
          <th class="px-6 py-3 text-left">Nombre</th>
          <th class="px-6 py-3 text-left">Apellido</th>
          <th class="px-6 py-3 text-left">Edad</th>
          <th class="px-6 py-3 text-left">Tel√©fono</th>
          <th class="px-6 py-3 text-left">Email</th>
          <th class="px-6 py-3 text-left">Direcci√≥n</th>
          <th class="px-6 py-3 text-center">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <% if (pacientes && pacientes.length > 0) { %>
          <% pacientes.forEach((p, i) => { %>
            <tr class="border-t border-[#E0E6E6]/60 hover:bg-[#E0E6E6]/40 transition">
              <td class="px-6 py-3"><%= i + 1 %></td>
              <td class="px-6 py-3"><%= p.dni %></td>
              <td class="px-6 py-3 font-semibold"><%= p.nombre %></td>
              <td class="px-6 py-3"><%= p.apellido %></td>
              <td class="px-6 py-3"><%= p.edad ? p.edad + ' a√±os' : '-' %></td>
              <td class="px-6 py-3"><%= p.telefono || '-' %></td>
              <td class="px-6 py-3"><%= p.email || '-' %></td>
              <td class="px-6 py-3"><%= p.direccion || '-' %></td>
              <td class="px-6 py-3 text-center space-x-2">
                <button onclick='editarPaciente(<%= JSON.stringify(p) %>)' class="text-[#489FB5] font-semibold hover:underline">Editar</button>
                <button onclick='confirmarEliminacion("/pacientes/eliminar/<%= p.id %>", "paciente", "<%= p.nombre %> <%= p.apellido %>")' class="text-red-500 font-semibold hover:underline">Eliminar</button>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="9" class="text-center py-6 text-gray-500">No hay pacientes registrados.</td>
          </tr>
        <% } %>
      </tbody>
    </table>
  </div>
</div>

<!-- Modal -->
<%- include('../../partials/modals/modal-paciente') %>
